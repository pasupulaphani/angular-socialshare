/*! angular-socialsharing 04-12-2014 */
!function(a,b){function c(a,c){!function(a,b,d){var e,f=a.getElementsByTagName(b)[0];return a.getElementById(d)?void console.warn("Skipping: Resource with id: "+d+" exists"):(e=a.createElement(b),e.id=d,e.src=c,e.async=!0,void f.parentNode.insertBefore(e,f))}(b,"script",a)}angular.module("socialsharing.config",[]).value("socialsharing.config",{debug:!0}),angular.module("socialsharing.services",[]),angular.module("socialsharing",["socialsharing.config","socialsharing.services"]),angular.module("socialsharing.services").provider("$fb",function(){function a(a){if(!d)throw"FB App Id Cannot be blank";a.fbAsyncInit=function(){FB.init({appId:d,channelUrl:e.channel,status:!0,xfbml:!0})}}function b(b){this.$window=b,a(b)}var d,e={locale:"en_US",channel:"app/channel.html"};return this.init=function(a,b){d=a,b&&angular.forEach(b,function(a,b){e.hasOwnProperty(b)?e[b]=a:console&&console.warn("Ignoring unknown config: "+b)}),c("facebook-jssdk",["//connect.facebook.net",e.locale,"all.js"].join("/"))},b.prototype.feed=function(a){if(a){if(a.display=a.display||"popup",a.method="feed",!this.$window.FB)throw"FB is not available/initialized";FB.ui(a,function(){})}},{init:this.init,$get:function(a){return new b(a)}}}),angular.module("socialsharing.services").provider("$twt",function(){var a="https://twitter.com/intent",b=140,d=22,e={trim_text:!1},f=function(a){return angular.forEach(["text","url","hashtags"],function(b){a.hasOwnProperty(b)||(a[b]="")}),a},g=function(a){var c,e=a.url.length>d?d:a.url.length,f=""===a.hashtags?0:a.hashtags.split(",").length;switch(f){case 0:c=1;break;case 1:c=3;break;default:c=2*f}return b-(a.text.length+e+a.hashtags.length+c+2)};return this.setConfig=function(a){a&&angular.forEach(a,function(a,b){e.hasOwnProperty(b)?e[b]=a:console&&console.warn("Ignoring unknown config: "+b)})},c("twitter-wjs","https://platform.twitter.com/widgets.js"),{setConfig:this.setConfig,$get:function(b,c,d){return{intent:function(h,i){i=f(i);var j=function(){var c=[a,"/",h,"?",d.encode(i)].join("");b.open(c,"","toolbar=0, status=0, width=550, height=420")},k=function(){var a=g(i);if(e.trim_text&&0>a){var b=i.text.length+a-3;return i.text.substring(0,b).trim()+"..."}return i.text},l=c.defer();l.promise.then(function(){i.text=k()}).then(function(){j()}),l.resolve()}}}}}),angular.module("socialsharing.services").factory("ssUtils",function(a,b){return{encode:function(a){var b="";for(var c in a)if(a.hasOwnProperty(c)){b&&"&"!==b[b.length-1]&&(b+="&");var d=a[c];if(d instanceof Array)for(var e=0;e<d.length;e++)b=b+c+"="+encodeURIComponent(d[e])+"&";else if("object"==typeof d){for(var f in d)if(d.hasOwnProperty(f)){{d[f]}b=b+c+"="+encodeURIComponent(d[f])+"&"}}else b=b+c+"="+encodeURIComponent(d)}return"&"===b[b.length-1]&&(b=b.substr(0,b.length-1)),b},shortenURL:function(c){var d="https://www.googleapis.com/urlshortener/v1/url",e={longUrl:c},f=b.post(d,e).then(function(b){return a.info("Shortening url success"),a.info(b.data.longUrl+" --> "+b.data.id),b.data.id},function(){return a.warn("Failed to shorten url"),c});return f}}})}(window,document);