/*! angular-socialsharing 19-11-2014 */
function loadSdkAsync(a,b){!function(a,c,d){var e,f=a.getElementsByTagName(c)[0];return a.getElementById(d)?void console.warn("Skipping: Resource with id: "+d+" exists"):(e=a.createElement(c),e.id=d,e.src=b,e.async=!0,void f.parentNode.insertBefore(e,f))}(document,"script",a)}!function(){angular.module("socialsharing.config",[]).value("socialsharing.config",{debug:!0}),angular.module("socialsharing.services",[]),angular.module("socialsharing",["socialsharing.config","socialsharing.services"]),angular.module("socialsharing.services").provider("$fb",function(){function a(a){if(!c)throw"FB App Id Cannot be blank";a.fbAsyncInit=function(){FB.init({appId:c,channelUrl:d.channel,status:!0,xfbml:!0})}}function b(b){this.$window=b,a(b)}var c,d={locale:"en_US",channel:"app/channel.html"};return this.init=function(a,b){c=a,b&&angular.forEach(b,function(a,b){d.hasOwnProperty(b)?d[b]=a:console.warn("Ignoring unknown config: "+b)}),loadSdkAsync("facebook-jssdk",["//connect.facebook.net",d.locale,"all.js"].join("/"))},b.prototype.feed=function(a){if(a){if(a.display=a.display||"popup",a.method="feed",!this.$window.FB)throw"FB is not available/initialized";FB.ui(a,function(){})}},{init:this.init,$get:function(a){return new b(a)}}}),angular.module("socialsharing.services").provider("$twt",function(){var a="https://twitter.com/intent",b=140,c={shorten_url:!1,trim_text:!1},d=function(a){return angular.forEach(["text","url","hashtags"],function(b){a.hasOwnProperty(b)||(a[b]="")}),a},e=function(a){var c,d=""===a.hashtags?0:a.hashtags.split(",").length;switch(d){case 0:c=1;break;case 1:c=3;break;default:c=2*d}return b-(a.text.length+a.url.length+a.hashtags.length+c+2)};return this.setConfig=function(a){a&&angular.forEach(a,function(a,b){c.hasOwnProperty(b)?c[b]=a:console.warn("Ignoring unknown config: "+b)})},loadSdkAsync("twitter-wjs","https://platform.twitter.com/widgets.js"),{setConfig:this.setConfig,$get:function(b,f,g){return{intent:function(h,i){i=d(i);var j=function(){var c=[a,"/",h,"?",g.encode(i)].join("");b.open(c,"","toolbar=0, status=0, width=550, height=420")},k=function(){var a=e(i);if(c.trim_text&&0>a){var b=i.text.length+a-3;return i.text.substring(0,b).trim()+"..."}return i.text},l=function(){var a;return a=c.shorten_url&&e(i)<0?g.shortenURL(i.url).then(function(a){return a}):f.when(i.url)};l().then(function(a){i.url=a}).then(function(){i.text=k()}).then(function(){j()})}}}}}),angular.module("socialsharing.services").factory("utils",function(a,b){return{encode:function(a){var b="";for(var c in a)if(a.hasOwnProperty(c)){b&&"&"!==b[b.length-1]&&(b+="&");var d=a[c];if(d instanceof Array)for(var e=0;e<d.length;e++)b=b+c+"="+encodeURIComponent(d[e])+"&";else if("object"==typeof d){for(var f in d)if(d.hasOwnProperty(f)){{d[f]}b=b+c+"="+encodeURIComponent(d[f])+"&"}}else b=b+c+"="+encodeURIComponent(d)}return"&"===b[b.length-1]&&(b=b.substr(0,b.length-1)),b},shortenURL:function(c){var d="https://www.googleapis.com/urlshortener/v1/url",e={longUrl:c},f=b.post(d,e).then(function(b){return a.info("Shortening url success"),a.info(b.data.longUrl+" --> "+b.data.id),b.data.id},function(){return a.warn("Failed to shorten url"),c});return f}}})}(window,document);